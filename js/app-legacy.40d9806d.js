(function(){"use strict";var t={3327:function(t,e,n){n(6992),n(8674),n(9601),n(7727);var r=n(144),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{class:"theme-"+t.themeColor},[n("v-main",[n("router-view")],1)],1)},a=[],i={name:"App",data:function(){return{themeColor:"main"}},methods:{onSwitchThemeColor:function(t){this.themeColor=t?"orange":"main"}},created:function(){this.$eventBus.$on("alert:theme",this.onSwitchThemeColor)},beforeDestroy:function(){this.$eventBus.$off("alert:theme")}},o=i,c=n(1001),l=n(3453),u=n.n(l),h=n(7524),d=n(1009),p=(0,c.Z)(o,s,a,!1,null,null,null),m=p.exports;u()(p,{VApp:h.Z,VMain:d.Z});var f=n(8345),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"d-flex vh-100 py-0"},[n("v-row",{attrs:{dense:!0,"no-gutters":""}},[n("v-col",{staticClass:"py-0",attrs:{cols:"4",md:"3"}},[n("friends-list",{staticClass:"h-100",on:{"user-select":t.userSelectHandler}})],1),n("v-col",{staticClass:"py-0",attrs:{cols:"8",md:"9"}},[n("cherri-chatroom-warp",{attrs:{userId:t.userId}})],1)],1)],1)},g=[],C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box-shadow--right"},[n("div",{staticClass:"py-3"},[t._v(t._s(t.$t("friends_list"))+"("+t._s(t.friendsList.length)+")")]),n("div",{staticClass:"c-list c-list--devide"},t._l(t.friendsList,(function(e){return n("div",{key:e.userId,staticClass:"c-list-item d-flex align-center",class:{"c-list-item--active":t.seletedUserId===e.userId},on:{click:function(n){return t.onClickHandler(e.userId)}}},[n("img",{staticClass:"rounded-circle",attrs:{src:e.avatar,alt:"user picture"}}),n("div",{staticClass:"pl-4"},[n("p",{staticClass:"mb-0"},[t._v(t._s(e.name))]),n("p",{staticClass:"mb-0"},[t._v(t._s(e.description))])])])})),0)])},x=[],w=n(8932),b={name:"FriendsList",data:function(){return{seletedUserId:"",friendsList:[]}},methods:{onClickHandler:function(t){this.seletedUserId=t,this.$emit("user-select",t)},getFriendList:function(){var t=this;this.$http.apiGetUserList().then((function(e){return t.friendsList=(0,w.Z)(e)})).catch((function(t){return console.error(t)}))}},created:function(){this.getFriendList()}},_=b,y=(0,c.Z)(_,C,x,!1,null,null,null),Z=y.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-layout d-flex flex-column vh-100"},[n("HeaderBar"),n(t.componentsName,{tag:"component",staticClass:"flex-grow-1",attrs:{userId:t.userId}})],1)},k=[],O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"nav"},[n("div",{staticClass:"nav-content d-flex flex-grow-1 align-center"},[n("h1",{staticClass:"text-h5 white--text"},[t._v("Cherri Chat")]),n("div",{staticClass:"d-flex align-center ml-auto"},[n("div",[n("v-btn",{staticClass:"rounded-pill font-bold mr-2",class:{"btn--active":"zh-tw"===t.$i18n.locale},attrs:{outlined:"",small:"",color:"white"},on:{click:function(e){return t.onSwitchLanguage("zh-tw")}}},[t._v(" 中文 ")]),n("v-btn",{staticClass:"rounded-pill font-bold",class:{"btn--active":"en-us"===t.$i18n.locale},attrs:{outlined:"",small:"",color:"white"},on:{click:function(e){return t.onSwitchLanguage("en-us")}}},[t._v(" English ")])],1),n("span",{staticClass:"white--text ml-2 mr-1"},[t._v(t._s(t.$t("theme_switch"))+": ")]),n("label",{staticClass:"switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.themeColor,expression:"themeColor"}],attrs:{type:"checkbox",value:"orange"},domProps:{checked:Array.isArray(t.themeColor)?t._i(t.themeColor,"orange")>-1:t.themeColor},on:{change:function(e){var n=t.themeColor,r=e.target,s=!!r.checked;if(Array.isArray(n)){var a="orange",i=t._i(n,a);r.checked?i<0&&(t.themeColor=n.concat([a])):i>-1&&(t.themeColor=n.slice(0,i).concat(n.slice(i+1)))}else t.themeColor=s}}}),n("span",{staticClass:"slider round"})])])]),t._m(0)])},S=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav-append d-flex align-center ml-3"},[n("div",{staticClass:"border-left--white d-flex align-center px-5"},[n("img",{staticClass:"rounded-circle",attrs:{src:"https://picsum.photos/id/237/50/50",alt:"user picture"}}),n("p",{staticClass:"text-h6 white--text mb-0 pl-2"},[t._v("潔西卡")])])])}],$={data:function(){return{themeColor:!1}},watch:{themeColor:function(){this.onSwitchThemeColor()}},methods:{onSwitchLanguage:function(t){this.$i18n.locale=t,sessionStorage.setItem("cherri-chat-language",t)},onSwitchThemeColor:function(){this.$eventBus.$emit("alert:theme",this.themeColor)}}},N=$,L=n(680),T=(0,c.Z)(N,O,S,!1,null,null,null),j=T.exports;u()(T,{VBtn:L.Z});var U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-column"},[n("div",{staticClass:"d-flex align-center justify-space-between box-shadow--bottom py-2 px-5"},[n("div",{staticClass:"d-flex align-center"},[n("img",{staticClass:"rounded-circle",attrs:{src:t.chatroomInfo.avatar,alt:"user picture"}}),n("p",{staticClass:"text-h6 pl-3 mb-0"},[t._v(t._s(t.chatroomInfo.name))])]),n("div",{staticClass:"d-flex"},[n("v-btn",{staticClass:"mx-1",attrs:{icon:!0},on:{click:function(e){t.searchObj.isOpen=!t.searchObj.isOpen}}},[n("i",{staticClass:"c-icon c-icon--search"})]),n("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,s=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:!0}},"v-btn",s,!1),r),[n("i",{staticClass:"c-icon c-icon--note"})])]}}])},[n("user-note")],1)],1)]),n("div",{staticClass:"position-relative"},[n("v-text-field",{directives:[{name:"show",rawName:"v-show",value:t.searchObj.isOpen,expression:"searchObj.isOpen"}],staticClass:"w-100 position-absolute px-2 background-transparent",attrs:{color:"success"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearchHandler.apply(null,arguments)}},model:{value:t.searchObj.text,callback:function(e){t.$set(t.searchObj,"text",e)},expression:"searchObj.text"}},[n("template",{slot:"append"},[n("div",{staticClass:"d-flex align-center"},[n("p",{staticClass:"mb-0 text-gray"},[t._v(t._s(t.$tc("search_message_outcome",t.searchQuantity)))]),n("v-btn",{attrs:{icon:!0},on:{click:function(e){t.searchObj.text=""}}},[n("i",{staticClass:"c-icon c-icon--close-sm"})])],1)])],2)],1),n("div",{staticClass:"d-flex flex-column flex-grow-1"},[n("div",{staticClass:"d-flex flex-column-reverse align-end flex-grow-1 border-bottom--main vh-50 overflow-auto -scroll px-3 py-3"},t._l(t.reverseList,(function(e){return n("p",{key:e.id,staticClass:"chat-item chat-item--main rounded-pill",class:{"highlight-allow":t.allowUseHighlight()},domProps:{innerHTML:t._s(t.allowUseHighlight(e.highlight)?e.highlight:e.content)}})})),0),n("div",{staticClass:"d-flex px-2 py-3 h-20"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.chatText,expression:"chatText"}],staticClass:"form-control",attrs:{name:"chat text",placeholder:t.$t("placehoder_common")},domProps:{value:t.chatText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addChatRecords.apply(null,arguments)},input:function(e){e.target.composing||(t.chatText=e.target.value)}}}),t._v(" "),n("v-btn",{attrs:{icon:!0},on:{click:t.addChatRecords}},[n("i",{staticClass:"c-icon c-icon--sent"})])],1)])])},R=[],V=n(4367),E=(n(3210),n(9600),n(1249),n(4603),n(8450),n(4916),n(8386),n(9714),n(4723),n(5306),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"mx-auto",attrs:{"max-width":"350",tile:""}},[n("v-list-item",[n("v-list-item-content",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.noteText,expression:"noteText"}],staticClass:"form-control border border--main pa-3",attrs:{name:"user note",cols:"30",rows:"5",placeholder:t.$t("placehoder_common")},domProps:{value:t.noteText},on:{input:function(e){e.target.composing||(t.noteText=e.target.value)}}}),n("v-btn",{staticClass:"btn--main mt-1 rounded-sm",on:{click:t.addUserNote}},[t._v(t._s(t.$t("add_common")))])],1)],1),n("div",{staticClass:"px-4 py-2"},[n("v-divider",{staticClass:"border--second"})],1),t._l(t.userNoteList,(function(e){return n("v-list-item",{key:e.id,staticClass:"pb-3"},[n("v-list-item-content",[n("div",{staticClass:"border border--second pa-2 position-relative"},[n("v-list-item-title",{staticClass:"text-main"},[t._v(t._s(t.getFormatTime(e.date)))]),n("p",{staticClass:"mb-0 mt-2"},[t._v(t._s(e.content))]),n("v-btn",{staticClass:"position-absolute to-right-top",attrs:{icon:!0},on:{click:function(n){return t.deleteUserNote(e.id)}}},[n("i",{staticClass:"c-icon c-icon--close-xs"})])],1)])],1)}))],2)}),D=[],B=(n(9653),{data:function(){return{userNoteList:[],noteText:""}},methods:{getUserNote:function(){var t=this;this.$http.apiGetUserNote().then((function(e){t.userNoteList=(0,w.Z)(e)})).catch((function(t){console.error(t)}))},getFormatTime:function(t){var e=new Date(Number(t)).toLocaleString("zh-tw",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return e},addUserNote:function(){if(this.noteText.trim()){var t={userId:"Jessica",content:this.noteText.trim(),date:(new Date).getTime()};this.$http.apiAddUserNote(t),this.getUserNote(),this.noteText=""}},deleteUserNote:function(t){this.$http.apiDeleteUserNote(t),this.getUserNote()}},created:function(){this.getUserNote()}}),G=B,H=n(3237),A=n(1418),F=n(7620),J=n(4799),P=(0,c.Z)(G,E,D,!1,null,null,null),M=P.exports;u()(P,{VBtn:L.Z,VCard:H.Z,VDivider:A.Z,VListItem:F.Z,VListItemContent:J.km,VListItemTitle:J.V9});var z={name:"CherriChatroom",components:{UserNote:M},props:{userId:{type:String}},data:function(){return{searchObj:{text:"",isOpen:!1},chatroomInfo:{userId:"",name:"",avatar:""},chatText:"",chatList:[]}},watch:{userId:function(){this.getChatRoomData()},"searchObj.text":function(t){""==t&&this.getChatRecord()}},computed:{reverseList:function(){return(0,w.Z)(this.chatList).reverse()},searchQuantity:function(){var t=this.searchObj.text.trim();if(!t)return 0;var e=this.chatList.map((function(t){return t.highlight})).join(""),n=new RegExp("(".concat(t,")"),"g");return e.match(n,e)?e.match(n,e).length:0}},methods:{getFriendInfoById:function(){var t=this;this.$http.apiGetUserById(this.userId).then((function(e){t.chatroomInfo=(0,V.Z)((0,V.Z)({},t.chatroomInfo),e[0])})).catch((function(t){console.error(t)}))},getChatRecord:function(){var t=this;this.$http.apiGetChatRecord(this.userId).then((function(e){t.chatList=(0,w.Z)(e)})).catch((function(t){console.error(t)}))},getChatRoomData:function(){this.getFriendInfoById(),this.getChatRecord()},addChatRecords:function(){if(this.chatText.trim()){var t={chatroomId:this.userId,content:this.chatText.trim(),date:(new Date).getTime()};this.$http.apiAddChatRecord(t),this.getChatRoomData(),this.chatText=""}},onSearchHandler:function(){var t=this;this.searchObj.text.trim()&&(this.chatList=this.chatList.map((function(e){if(e.content.match(t.searchObj.text.trim())){var n=t.searchObj.text.trim(),r=new RegExp("(".concat(n,")"),"g");e.highlight=e.content.replace(r,'<span class="highlight">$1</span>')}return e})))},allowUseHighlight:function(t){return this.searchObj.isOpen&&this.searchObj.text.trim()&&t}},created:function(){this.getChatRoomData()}},Q=z,W=n(4985),q=n(1347),K=(0,c.Z)(Q,U,R,!1,null,null,null),X=K.exports;u()(K,{VBtn:L.Z,VMenu:W.Z,VTextField:q.Z});var Y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"w-100"},[r("div",{staticClass:"text-center default-align"},[r("img",{attrs:{width:"180",height:"150",src:n(5786),alt:"default image"}}),r("p",{staticClass:"text-h5 text-main mt-2"},[t._v(t._s(t.$t("welcome_phrase")))])])])},tt=[],et={name:"DefaultView"},nt=et,rt=(0,c.Z)(nt,Y,tt,!1,null,null,null),st=rt.exports,at={name:"CherriChatroomWarp",components:{HeaderBar:j,CherriChatroom:X,DefaultView:st},props:{userId:{type:String}},computed:{componentsName:function(){return this.userId?"CherriChatroom":"DefaultView"}}},it=at,ot=(0,c.Z)(it,I,k,!1,null,null,null),ct=ot.exports,lt={name:"CherriChat",components:{FriendsList:Z,CherriChatroomWarp:ct},data:function(){return{userId:""}},methods:{userSelectHandler:function(t){this.userId=t}}},ut=lt,ht=n(2102),dt=n(247),pt=n(2877),mt=(0,c.Z)(ut,v,g,!1,null,null,null),ft=mt.exports;u()(mt,{VCol:ht.Z,VContainer:dt.Z,VRow:pt.Z}),r.Z.use(f.Z);var vt=[{path:"/",name:"home",component:ft}],gt=new f.Z({routes:vt}),Ct=gt,xt=n(629);r.Z.use(xt.ZP);var wt=new xt.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}}),bt=n(7152),_t={friends_list:"好友列表",welcome_phrase:"開始使用 Cherri Chat",placehoder_common:"輸入訊息...",search_message_outcome:"{n} 則相符訊息",add_common:"新增",theme_switch:"切換主題"},yt=_t,Zt={friends_list:"Friends List",welcome_phrase:"Start Using Cherri Chat",placehoder_common:"Enter Messages...",search_message_outcome:"{n} matching message | {n} matching messages",add_common:"Add",theme_switch:"Theme"},It=Zt;r.Z.use(bt.Z);var kt="en-us"===sessionStorage.getItem("cherri-chat-language")?"en-us":"zh-tw",Ot={"zh-tw":yt,"en-us":It},St=new bt.Z({locale:kt,messages:Ot}),$t=St,Nt=n(9132);r.Z.use(Nt.Z);var Lt=new Nt.Z({}),Tt=n(7906),jt=n(6198),Ut=(n(7327),n(1539),n(1703),n(2222),n(8862),n(9669)),Rt=n.n(Ut),Vt=n(5934),Et=null,Dt=null,Bt=null,Gt=null,Ht=null,At=null,Ft=null,Jt="mock/",Pt=Rt().create({baseURL:Jt});Et=function(){var t=(0,jt.Z)((0,Tt.Z)().mark((function t(){var e;return(0,Tt.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Pt.get("apiGetUserList.json");case 3:return e=t.sent,t.abrupt("return",e.data);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),Dt=function(){var t=(0,jt.Z)((0,Tt.Z)().mark((function t(e){var n;return(0,Tt.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Pt.get("apiGetUserList.json");case 3:return n=t.sent,t.abrupt("return",n.data.filter((function(t){return t.userId===e})));case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),Bt=function(){var t=(0,jt.Z)((0,Tt.Z)().mark((function t(e){var n,r,s;return(0,Tt.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}throw new Error("chatroomId can't be null");case 3:return t.next=5,Pt.get("apiGetChatRecord.json");case 5:return n=t.sent,r=n.data.filter((function(t){return t.chatroomId===e})),s=localStorage.getItem("cherri-append-chatrecord"),s=s?JSON.parse(s).filter((function(t){return t.chatroomId===e})):[],t.abrupt("return",[].concat((0,w.Z)(r),(0,w.Z)(s)));case 12:return t.prev=12,t.t0=t["catch"](0),t.abrupt("return",t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),Gt=function(){var t=(0,jt.Z)((0,Tt.Z)().mark((function t(){var e,n,r,s,a=arguments;return(0,Tt.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:"Jessica",t.prev=1,e){t.next=4;break}throw new Error("user");case 4:return t.next=6,Pt.get("apiGetUserNote.json");case 6:return n=t.sent,r=n.data.filter((function(t){return t.userId===e})),s=localStorage.getItem("cherri-append-usernote"),s=s?JSON.parse(s).filter((function(t){return t.userId===e})):[],t.abrupt("return",[].concat((0,w.Z)(r),(0,w.Z)(s)));case 13:return t.prev=13,t.t0=t["catch"](1),t.abrupt("return",t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(){return t.apply(this,arguments)}}(),Ht=function(){var t=(0,jt.Z)((0,Tt.Z)().mark((function t(e){var n;return(0,Tt.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.id=(0,Vt.Z)(),n=localStorage.getItem("cherri-append-chatrecord"),n=n?JSON.parse(n):[],n.push(e),localStorage.setItem("cherri-append-chatrecord",JSON.stringify(n));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),At=function(){var t=(0,jt.Z)((0,Tt.Z)().mark((function t(e){var n;return(0,Tt.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.id=(0,Vt.Z)(),n=localStorage.getItem("cherri-append-usernote"),n=n?JSON.parse(n):[],n.push(e),localStorage.setItem("cherri-append-usernote",JSON.stringify(n));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ft=function(){var t=(0,jt.Z)((0,Tt.Z)().mark((function t(e){var n;return(0,Tt.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=localStorage.getItem("cherri-append-usernote"),n=JSON.parse(n),n=n.filter((function(t){return t.id!==e})),localStorage.setItem("cherri-append-usernote",JSON.stringify(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var Mt={apiGetUserList:Et,apiGetUserById:Dt,apiGetChatRecord:Bt,apiGetUserNote:Gt,apiAddChatRecord:Ht,apiAddUserNote:At,apiDeleteUserNote:Ft};r.Z.prototype.$http=Mt,r.Z.prototype.$eventBus=new r.Z,r.Z.config.productionTip=!1,new r.Z({router:Ct,store:wt,i18n:$t,vuetify:Lt,render:function(t){return t(m)}}).$mount("#app")},5786:function(t,e,n){t.exports=n.p+"img/img_default.f910cc3e.png"}},e={};function n(r){var s=e[r];if(void 0!==s)return s.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,r,s,a){if(!r){var i=1/0;for(u=0;u<t.length;u++){r=t[u][0],s=t[u][1],a=t[u][2];for(var o=!0,c=0;c<r.length;c++)(!1&a||i>=a)&&Object.keys(n.O).every((function(t){return n.O[t](r[c])}))?r.splice(c--,1):(o=!1,a<i&&(i=a));if(o){t.splice(u--,1);var l=s();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[r,s,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/vincent-cherrichat/"}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,a,i=r[0],o=r[1],c=r[2],l=0;if(i.some((function(e){return 0!==t[e]}))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(c)var u=c(n)}for(e&&e(r);l<i.length;l++)a=i[l],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(u)},r=self["webpackChunkvincent_cherrichat"]=self["webpackChunkvincent_cherrichat"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(3327)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.40d9806d.js.map